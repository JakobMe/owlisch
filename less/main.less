/*
 * LESS-Modul: Main.
 * Haupt-Style-Datei; definiert grundlegende Stile.
 * @author Jakob Metzger <jakob.me@gmail.com>
 * @copyright 2015 Jakob Metzger
 */

// HTML
html { -webkit-text-size-adjust: 100%; }

// Tap-Hightlight entfernen
* { -webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important; }

// Textauswahl verhindern
*:not(input) {
    -webkit-touch-callout: none;
    -webkit-user-select:   none;
     -khtml-user-select:   none;
       -moz-user-select:   none;
        -ms-user-select:   none;
            user-select:   none;
}

// Body
body {
    -webkit-font-smoothing: antialiased;
    position: fixed;
    overflow: hidden;
    top: 0;
    left: 0;
    margin: 0;
    padding: 0;
    width: 100vw;
    height: 100vh;
    background: @color-white;
    .font-main();
    
    // Variante: Webapp
    &.webapp {
        
        // Statusbar zeigen
        #bar-top #bar-status { display: block; }
        
        // Innenabstand Content
        #content { padding-top: (@height-statusbar + @height-titlebar); }
    }
}

// Viewport
#viewport {
    background-image: url("../img/layout/spinner-viewport.gif?v=@{version}");
    background-color: @color-white;
    
    // Hintergrund
    &, #viewport-inner {
        width: 100%;
        height: 100%;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: @height-spinner @height-spinner;
    }
    
    // Innen
    #viewport-inner {
        overflow: hidden;
        position: absolute;
        top: 0;
        left: 0;
        background-image: url("../img/layout/spinner.gif?v=@{version}");
        background-color: @color-background;
        .transition(opacity);
        
        // Variante: Quiz
        &.quiz {
            #content { padding-bottom: 0; }
            #bar-tabs { .translate(0, (@height-titlebar + @size-line-thin)); }
        }
        
        // Variante: Versteckt
        &.hidden { opacity: @opacity-invisible; }
    }
}

// Clearfix
.clear { clear: both; }

// Responsive
@media screen and (min-width: @width-iphone) {
    
    // Body
    body {
        overflow: auto;
        position: static;
        background-repeat: repeat;
        background-attachment: fixed;
        background-position: left top;
        background-image: url("../img/layout/background.png?v=@{version}");
        background-color: lighten(@color-background, (@darken-background * 2));
        background-size: @size-background @size-background;
        
        // Webapp Besonderheiten
        &, &.webapp {
            
            // Statusbar zeigen
            #bar-top #bar-status { display: block; }
            
            // Innenabstand Content
            #content { padding-top: (@height-statusbar + @height-titlebar); }
        }
    }
    
    // Viewport
    #viewport {
        background-color: transparent;
        background-repeat: no-repeat;
        background-position: center center;
        margin: 0 auto;
        background-image: url("../img/layout/iphone.png?v=@{version}");
        width: @width-mobile;
        height: @height-mobile;
        margin-top: (@size-gap-mobile-bottom - @size-gap-mobile-top);
        padding: @size-gap-mobile-top @size-gap-mobile-sides;
        padding-bottom: @size-gap-mobile-bottom;
        background-size: @width-iphone @height-iphone;
        
        // Viewport Innen
        #viewport-inner {
            position: relative;
            width: @width-mobile;
            height: @height-mobile;
        }
    }
}

// Responsive Retina
@media screen and (min-width: @width-iphone)
              and (-webkit-min-device-pixel-ratio: 1.5),
       screen and (min-width: @width-iphone)
              and (min-resolution: 144dpi) {
    
    // Hintergrundbilder
    body { background-image: url("../img/layout/background-retina.png?v=@{version}"); }
    #viewport { background-image: url("../img/layout/iphone-retina.png?v=@{version}"); }
}